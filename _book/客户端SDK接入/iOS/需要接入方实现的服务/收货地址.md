# 收货地址

## 一、接口格式规范

* 请求协议统一通过POST调用。

* 返回数据格式：

```

{         

"errno": "0",         
"request_id": 123456789,         
"errmsg": "",         
"data": {}

}

```

>  Errno表示请求是否被正常地处理，调用方应该按以下流程处理：

* [x] 1. 若Errno == 0，表示请求被正常地处理，此时调用方应该继续解析服务端返回的数据用于业务逻辑。
* [x] 2. 若Errno != 0，表示请求出现异常，调用方应该判断错误码是否为双方预先约定的特定错误码，若是预先约定需要特殊处理的错误码，按处理流程进行。
* [x] 3. 若Errno != 0，且不是双方预先约定的特定错误码，表示请求无法被服务端正确地处理，此时服务端无法返回正确的业务数据，调用方除了errno和errmsg两个字段外，不应处理其它任何字段。调用方此时应根据具体的业务场景决定给出对应的提示，且为了追查问题方便，若是可视化的错误提示，应尽量地将errno和errmsg放在错误提示中。



## 二、收货地址字段说明

| **名称** | **示例** | **说明** | **必填** |
| --- | --- | --- | --- |
| id | 1 | 地址标识符，用于更新或删除时指定 | 更新，会用到 |
| name | 百小度 | 收货人 | 必填 |
| phone | 18688886666 | 联系电话 | 必填 |
| l1 | pid | 省 | 必填 |
| l2 | cid | 市 | 必填 |
| l3 | ccid | 县 | 必填 |
| street | 葫芦屯村八组二大队48号 | 街道地址 | 必填 |
| zipcode | 464000 | 邮编 | 非必填 |

* 错误码

| **错误码** | **含义** | **备注** |
| --- | --- | --- |
| "0" | 正常 |   |
| "-1" | 异常 |   |
| "401" | 登陆信息异常 | 端上根据此状态码，重新登陆 |
| "400403" | 用户名称错误 | 端上视觉效果提示，不弹起Toast |
| "400402" | 电话号码错误 | 端上视觉效果提示. |
| "400404" | 街道错误 | 端上视觉效果提示，不弹起Toast |
| "400405" | 邮编错误 | 端上视觉效果提示. |

## 三、接口请求和返回数据说明
### 1、用户添加收货地址

* 请求：

```
data={
  "name": "百小度",
  "phone": "18688886666",
  "l1": "1234",
  "l2": "1234",
  "l3": "1234",
  "street": "葫芦屯村八组二大队48号",
  "zipcode": "464000",
  "scope": "true"
}
```

* 返回：

```
{
    "errno": "0",           //0正常， 401登陆异常， 其他错误码：异常
    "errmsg": "",           //用户看到的错误信息
    "request_id": "123456789",
    "data": {
        "id": "1" // 创建成功的地址编号
        "address_scope_create": {
            "permit": "true",
            "forbidden": "false",
            "type":"1", //type: 1用户相关， 2设备相关
            "grade": "1",//grade:“3”, permit 永远为"true"
            "need_apply": "0",
            "name": "使用address_scope_create框架",
            "short_name": "" //用户设置页面显示短名称
            "description": "说明为何需要使用address_scope_create框架",
            "tip_status":"0",//1：同意  0:弹框  -1:拒绝
            "rule": ["baidu.com", "iqiyi.com"]，
            "ext":{
                       
            }
       }，
    }
}
```

### 2、用户查询收货地址
* 请求：
* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": {                       //默认在最上，保证修改时间倒顺序。
        “list”:[
        {
            "id": "1",
            "name": "百小度",
            "phone": "13566666666",
            "phone_cipher": "135******666",
            "l1": {
                "code":"111",
                "name":"北京市",
            },
            "l2": {
                "code":"111",
                "name":"北京市",
            },
            "l3": {
                "code":"111",
                "name":"北京市",
            },
            "street": "葫芦屯村八组二大队48号",
            "zipcode": "464000"
            "default":"0",  //default:1是默认，0非默认
        },     
        {
            "id": "1",
            "name": "百小度",
            "phone": "13566666666",
            "phone_cipher": "135******666",
            "l1": {
                "code":"111",
                "name":"北京市",
            },
            "l2": {
                "code":"111",
                "name":"北京市",
            },
            "l3": {
                "code":"111",
                "name":"北京市",
            },
            "street": "葫芦屯村八组二大队48号",
            "zipcode": "464000"
            "default":"1",
        }
    ]
}
```

### 3、用户修改收货地址


* 请求：

```
data={
    "id":"1",       //必传
    "l1":"1000",    //L1,L2,L3任意修改需要L1,L2,L3同时提交，其他修改什么提交什么
    "l2":"1000",
    "l3":"1000",
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```

### 4、用户地址默认修改

* 请求:

```
data={
    "id":"1",       //必传
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```

### 5、用户删除收货地址



* 请求:

```
data={
    "id":"1"，
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": [
    ]
}
```

### 6、获取地址数据


* 请求:

```
data={
    "md5":"md5"，
}
```

* 返回：

```
{
    "errno": "0",
    "errmsg": "",
    "request_id": "123456789",
    "data": {
        "md5":"",
        "body":"{xxxx}",
    }
}
```

